{"version":3,"sources":["components/TodosContext.tsx","hooks/useLocalStorage.ts","components/TodoItem.tsx","components/TodoList.tsx","components/TodosFilter.tsx","TodoApp.tsx","App.tsx","index.tsx"],"names":["TodosContext","React","createContext","todos","setTodos","visibleTodos","setVisibleTodos","filterBy","setFilterBy","TodosProvider","children","initialValue","key","useState","storage","localStorage","getItem","JSON","parse","value","setValue","useEffect","setItem","stringify","useLocalStorage","contextValue","Provider","TodoItem","memo","todo","editClass","setEditClass","editTodoId","setEditTodoId","newTitle","setNewTitle","useContext","replaceTitle","targetElement","find","el","id","length","title","className","classNames","completed","type","checked","onChange","map","onDoubleClick","onClick","filter","ref","input","focus","event","target","trim","onKeyDown","onBlur","TodoList","htmlFor","hidden","filterTodos","Fragment","TodosFilter","counter","filterHandler","preventDefault","currentTarget","textContent","href","selected","TodoApp","addNewTodo","newtodo","Date","onSubmit","placeholder","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.483800e2.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport { useLocalStorage } from '../hooks/useLocalStorage';\nimport { Todo } from '../types';\n\ntype ContextProps = {\n  todos: Todo[],\n  setTodos: (items: Todo[]) => void,\n  visibleTodos: Todo[],\n  setVisibleTodos: (items: Todo[]) => void,\n  filterBy: string,\n  setFilterBy: (value: string) => void,\n}\n\nexport const TodosContext = React.createContext<ContextProps>({\n  todos: [],\n  setTodos: () => {},\n  visibleTodos: [],\n  setVisibleTodos: () => {},\n  filterBy: 'All',\n  setFilterBy: () => {},\n});\n\nexport const TodosProvider: React.FC = ({ children }) => {\n  const [todos, setTodos] = useLocalStorage([], 'todos');\n  const [visibleTodos, setVisibleTodos] = useState<Todo[]>([]);\n  const [filterBy, setFilterBy] = useState('All');\n\n  const contextValue = {\n    todos,\n    setTodos,\n    visibleTodos,\n    setVisibleTodos,\n    filterBy,\n    setFilterBy,\n  };\n\n  return (\n    <TodosContext.Provider value={contextValue}>\n      {children}\n    </TodosContext.Provider>\n  );\n};\n","import { useState, useEffect } from 'react';\nimport { Todo } from '../types';\n\nexport const useLocalStorage = (initialValue: Todo[], key: string) => {\n  const getValue = () => {\n    const storage = localStorage.getItem(key);\n\n    if (storage) {\n      return JSON.parse(storage);\n    }\n\n    return initialValue;\n  };\n\n  const [value, setValue] = useState(getValue);\n\n  useEffect(() => {\n    localStorage.setItem(key, JSON.stringify(value));\n  }, [value]);\n\n  return [value, setValue];\n};\n","import React, { useState, useContext } from 'react';\nimport classNames from 'classnames';\nimport { Todo } from '../types';\nimport { TodosContext } from './TodosContext';\n\ntype Props = {\n  todo: Todo,\n}\n\nexport const TodoItem: React.FC<Props> = React.memo(({ todo }) => {\n  const [editClass, setEditClass] = useState('');\n  const [editTodoId, setEditTodoId] = useState('');\n  const [newTitle, setNewTitle] = useState('');\n  const { todos, setTodos } = useContext(TodosContext);\n\n  const toggleHandler = (id: number) => {\n    setTodos(todos.map((el) => {\n      if (el.id === id) {\n        return {\n          ...el,\n          completed: !el.completed,\n        };\n      }\n\n      return el;\n    }));\n  };\n\n  const removeTodo = (id: number) => {\n    setTodos(todos.filter(el => el.id !== id));\n  };\n\n  const editTodo = () => {\n    setNewTitle(todo.title);\n    setEditClass('editing');\n    setEditTodoId('editTodo');\n  };\n\n  const replaceTitle = () => {\n    const targetElement = todos.find(el => el.id === todo.id);\n\n    if (targetElement && newTitle.length > 0) {\n      targetElement.title = newTitle;\n    }\n  };\n\n  const saveNewTitle = (event: React.KeyboardEvent) => {\n    if (event.key === 'Enter') {\n      replaceTitle();\n      setEditClass('');\n    }\n\n    if (event.key === 'Escape') {\n      setEditClass('');\n    }\n  };\n\n  const onblurHandler = () => {\n    replaceTitle();\n    setEditClass('');\n  };\n\n  return (\n    <li\n      className={classNames(\n        { completed: todo.completed },\n        editClass,\n      )}\n    >\n      <div className=\"view\">\n        <input\n          type=\"checkbox\"\n          className=\"toggle\"\n          id=\"toggle-view\"\n          checked={todo.completed}\n          onChange={() => toggleHandler(todo.id)}\n        />\n\n        <label\n          onDoubleClick={editTodo}\n        >\n          {todo.title}\n        </label>\n\n        <button\n          data-cy=\"deleteTodo\"\n          type=\"button\"\n          className=\"destroy\"\n          onClick={() => removeTodo(todo.id)}\n        />\n      </div>\n      <input\n        id={editTodoId}\n        type=\"text\"\n        className=\"edit\"\n        ref={input => input && input.focus()}\n        value={newTitle}\n        onChange={event => setNewTitle(event.target.value.trim())}\n        onKeyDown={saveNewTitle}\n        onBlur={onblurHandler}\n      />\n    </li>\n  );\n});\n","import React, { useContext } from 'react';\n\nimport { Todo } from '../types';\nimport { TodoItem } from './TodoItem';\nimport { TodosContext } from './TodosContext';\n\nexport const TodoList: React.FC = React.memo(() => {\n  const { todos, setTodos } = useContext(TodosContext);\n  const { filterBy } = useContext(TodosContext);\n\n  const toggleAll = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setTodos(todos.map(todo => ({\n      ...todo,\n      completed: event.target.checked,\n    })));\n  };\n\n  const filterTodos = (value: string) => {\n    switch (value) {\n      case 'Active':\n        return todos.filter(todo => !todo.completed);\n\n      case 'Completed':\n        return todos.filter(todo => todo.completed);\n\n      default:\n        return todos;\n    }\n  };\n\n  return (\n    <section className=\"main\">\n      <input\n        type=\"checkbox\"\n        id=\"toggle-all\"\n        className=\"toggle-all\"\n        data-cy=\"toggleAll\"\n        checked={todos.filter(todo => !todo.completed).length === 0}\n        onChange={toggleAll}\n      />\n      <label\n        htmlFor=\"toggle-all\"\n        hidden={todos.length === 0}\n      >\n        Mark all as complete\n      </label>\n\n      <ul\n        className=\"todo-list\"\n        data-cy=\"todoList\"\n      >\n        {filterTodos(filterBy).map((todo: Todo) => (\n          <React.Fragment key={todo.id}>\n            <TodoItem todo={todo} />\n          </React.Fragment>\n        ))}\n      </ul>\n    </section>\n  );\n});\n","import classNames from 'classnames';\nimport React, { useContext } from 'react';\nimport { TodosContext } from './TodosContext';\n\nexport const TodosFilter: React.FC = React.memo(() => {\n  const { todos, setTodos } = useContext(TodosContext);\n  const { filterBy, setFilterBy } = useContext(TodosContext);\n\n  const counter = () => todos.filter(todo => !todo.completed).length;\n  const counterCompleted = () => todos.filter(todo => todo.completed).length;\n\n  const clearCompleted = () => {\n    setTodos(todos.filter(todo => !todo.completed));\n  };\n\n  const filterHandler = (\n    event: React.MouseEvent<HTMLAnchorElement, MouseEvent>,\n  ) => {\n    event.preventDefault();\n    setFilterBy(event.currentTarget.textContent || 'All');\n  };\n\n  return (\n    <>\n      {todos.length > 0 && (\n        <footer className=\"footer\">\n          <span\n            className=\"todo-count\"\n            data-cy=\"todosCounter\"\n          >\n            {`${counter()} `}\n            {counter() > 1 ? 'items left' : 'item left'}\n          </span>\n\n          <ul className=\"filters\">\n            <li>\n              <a\n                href=\"#/\"\n                className={classNames({ selected: filterBy === 'All' })}\n                onClick={filterHandler}\n              >\n                All\n              </a>\n            </li>\n\n            <li>\n              <a\n                href=\"#/active\"\n                className={classNames({ selected: filterBy === 'Active' })}\n                onClick={filterHandler}\n              >\n                Active\n              </a>\n            </li>\n\n            <li>\n              <a\n                href=\"#/completed\"\n                className={classNames({ selected: filterBy === 'Completed' })}\n                onClick={filterHandler}\n              >\n                Completed\n              </a>\n            </li>\n          </ul>\n\n          {counterCompleted() > 0 && (\n            <button\n              type=\"button\"\n              className=\"clear-completed\"\n              onClick={clearCompleted}\n            >\n              Clear completed\n            </button>\n          )}\n        </footer>\n      )}\n    </>\n  );\n});\n","import React, { useContext, useState } from 'react';\nimport { TodosContext } from './components/TodosContext';\n\nexport const TodoApp: React.FC = () => {\n  const [newTitle, setNewTitle] = useState('');\n  const { todos, setTodos } = useContext(TodosContext);\n\n  const addNewTodo = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    if (!newTitle) {\n      return;\n    }\n\n    const newtodo = {\n      id: +new Date(),\n      title: newTitle,\n      completed: false,\n    };\n\n    setTodos([...todos, newtodo]);\n\n    setNewTitle('');\n  };\n\n  return (\n    <form\n      onSubmit={addNewTodo}\n      onBlur={addNewTodo}\n    >\n      <input\n        type=\"text\"\n        className=\"new-todo\"\n        placeholder=\"What needs to be done?\"\n        data-cy=\"createTodo\"\n        value={newTitle}\n        onChange={(event => setNewTitle(event.target.value.trim()))}\n      />\n    </form>\n  );\n};\n","import React from 'react';\nimport { TodoList } from './components/TodoList';\nimport { TodosFilter } from './components/TodosFilter';\nimport { TodosProvider } from './components/TodosContext';\nimport { TodoApp } from './TodoApp';\n\nconst App: React.FC = () => (\n  <TodosProvider>\n    <section className=\"todoapp\">\n      <header className=\"header\">\n        <h1>todos</h1>\n\n        <TodoApp />\n      </header>\n\n      <section className=\"main\">\n        <TodoList />\n      </section>\n\n      <TodosFilter />\n    </section>\n  </TodosProvider>\n);\n\nexport default App;\n","import ReactDOM from 'react-dom';\n\nimport './styles/index.css';\nimport './styles/todo-list.css';\nimport './styles/filters.css';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}